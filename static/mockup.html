<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>webrec: Record and Upload Audio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/static/microphone.png">

  <style>
    body {
      font-family: 'Verdana', sans-serif;
      background-color: #fafafa; /* very light gray */
      -webkit-text-size-adjust: 100%;
    }

    a {
      text-decoration: none; /* Removes underlining from links */
    }

    h1, h2, h3 {
      font-family: 'Georgia', serif;
    }

    button {
      font-family: 'Verdana', sans-serif;
      font-size: 16px;
      padding: 10px 20px; 
      border: 0; /* No border */
      border-radius: 5px; /* Rounds the corners */
      background-color: lightgreen; /* background */
      color: black; /* text */
      margin: 0; /* No margins */
      box-sizing: border-box; /* Ensures padding is included in the total width and height */
      -webkit-appearance: none; /* Removes default styling on iOS */
      appearance: none; /* Removes default styling on other browsers */
    }

    button:disabled {
      background-color: gray;
      color: white;
    }

    /* Flex container for meters */
    .meter-container {
      display: flex;
      flex-direction: row;
      align-items: center; /* Centers items vertically */
      gap: 15px;
      max-width: 500px; /* Maximum width of the container */
      margin-bottom: 20px; /* Adds some space below each meter */
    }

    meter {
      flex: 1; /* Allows the meter to grow */
      /* Remove inline styles for width from the HTML and control it here if necessary */
    }

    /* Flex container for buttons */
    .button-container {
      display: flex;
      flex-direction: row;
      gap: 15px;
      width: 100%; /* The container takes up 100% of the parent's width */
      max-width: 500px; /* Maximum width of the container */
      justify-content: space-between;
      margin-top: 20px; /* Adds some space above */
    }

    /* Styles for the buttons */
    #start, #startOver {
      flex: 1; /* Allows the buttons to grow and fill the container */
    }

    /* Style for the Safari help link container */
    #safari-help {
      margin-top: 20px; /* Adds some space above the help link */
    }
  </style>

</head>
<body>
  <h2>Record and Upload Audio with Stop on Silence</h2>

  <!-- VAD toggle and delay selection -->
  <div style="font-size: 120%;">
    <label><input type="checkbox" id="vad" checked> Stop</label> after:
    <label><input type="radio" name="sil_dur" value="1">&nbsp;1,</label>
    <label><input type="radio" name="sil_dur" value="2" checked>&nbsp;2,</label> or
    <label><input type="radio" name="sil_dur" value="3">&nbsp;3 seconds</label>
    of silence.
  </div>
  <br>
  
  <!-- Meter for audio level -->
  <div class="meter-container">
    <label for="level">Audio level:</label>
    <meter id="level" min="0" max="1" low="0.05" high="0.7" value="0"></meter>
    <span id="vadSpan">Silence</span>
  </div>

  <!-- Meter for recording time -->
  <div class="meter-container">
    <label for="full"><span id="secs">00.0</span> of up to 60 seconds:</label>
    <meter id="full" min="0" max="60" high="55" value="0"></meter>
  </div>

  <!-- Button container -->
  <div class="button-container">
    <button id="start">End Recording</button>
    <button id="startOver">Start Over</button>
  </div>

  <!-- Safari users' help link -->
  <div id="safari-help">
    <h3>Apple Safari users: <a href="https://support.apple.com/guide/mac-help/control-access-to-the-microphone-on-mac-mchla1b1e1fe/mac">please see here if you are having trouble.</a></h3>
  </div>
  
  <br>
  Python Flask and JavaScript source code is
  <a href="https://replit.com/@jsalsman/webrec">on Replit</a>
  and <a href="https://github.com/jsalsman/webrec">GitHub.</a>
</body>
</html>
